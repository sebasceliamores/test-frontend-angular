<section class="page">
  <div class="panel">
    <h2 class="title">Formulario de Registro</h2>

    <form class="form-grid" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="field">
        <label for="id">ID</label>
        <input
          id="id"
          type="text"
          maxlength="10"
          formControlName="id"
          [ngClass]="{ invalid: showError(idControl) }"
        />
        <span class="error" *ngIf="showError(idControl)">
          <ng-container *ngIf="idControl.errors?.['required']">Este campo es requerido</ng-container>
          <ng-container *ngIf="idControl.errors?.['minlength']">Minimo 3 caracteres</ng-container>
          <ng-container *ngIf="idControl.errors?.['maxlength']">Maximo 10 caracteres</ng-container>
          <ng-container *ngIf="idControl.errors?.['idTaken']">ID no valido</ng-container>
        </span>
      </div>

      <div class="field">
        <label for="name">Nombre</label>
        <input
          id="name"
          type="text"
          maxlength="100"
          formControlName="name"
          [ngClass]="{ invalid: showError(nameControl) }"
        />
        <span class="error" *ngIf="showError(nameControl)">
          <ng-container *ngIf="nameControl.errors?.['required']">Este campo es requerido</ng-container>
          <ng-container *ngIf="nameControl.errors?.['minlength']">Minimo 6 caracteres</ng-container>
          <ng-container *ngIf="nameControl.errors?.['maxlength']">Maximo 100 caracteres</ng-container>
        </span>
      </div>

      <div class="field">
        <label for="description">Descripción</label>
        <textarea
          id="description"
          rows="3"
          maxlength="200"
          formControlName="description"
          [ngClass]="{ invalid: showError(descriptionControl) }"
        ></textarea>
        <span class="error" *ngIf="showError(descriptionControl)">
          <ng-container *ngIf="descriptionControl.errors?.['required']">Este campo es requerido</ng-container>
          <ng-container *ngIf="descriptionControl.errors?.['minlength']">Minimo 10 caracteres</ng-container>
          <ng-container *ngIf="descriptionControl.errors?.['maxlength']">Maximo 200 caracteres</ng-container>
        </span>
      </div>

      <div class="field">
        <label for="logo">Logo</label>
        <input
          id="logo"
          type="text"
          maxlength="500"
          formControlName="logo"
          [ngClass]="{ invalid: showError(logoControl) }"
        />
        <span class="error" *ngIf="showError(logoControl)">
          <ng-container *ngIf="logoControl.errors?.['required']">Este campo es requerido</ng-container>
        </span>
      </div>

      <div class="field">
        <label for="date_release">Fecha Liberación</label>
        <input
          id="date_release"
          type="date"
          formControlName="date_release"
          [ngClass]="{ invalid: showError(dateReleaseControl) }"
        />
        <span class="error" *ngIf="showError(dateReleaseControl)">
          <ng-container *ngIf="dateReleaseControl.errors?.['required']">Este campo es requerido</ng-container>
          <ng-container *ngIf="dateReleaseControl.errors?.['minToday']">La fecha debe ser igual o mayor a hoy</ng-container>
        </span>
      </div>

      <div class="field">
        <label for="date_revision">Fecha Revisión</label>
        <input
          id="date_revision"
          type="date"
          formControlName="date_revision"
          readonly
          [ngClass]="{ invalid: showError(dateRevisionControl) }"
        />
        <span class="error" *ngIf="showError(dateRevisionControl)">
          <ng-container *ngIf="dateRevisionControl.errors?.['required']">Este campo es requerido</ng-container>
          <ng-container *ngIf="dateRevisionControl.errors?.['oneYearAfterRelease']">
            La fecha debe ser un año posterior a liberación
          </ng-container>
        </span>
      </div>

      <div class="form-actions">
        <button class="btn secondary" type="button" (click)="onReset()">Reiniciar</button>
        <button class="btn primary" type="submit" [disabled]="form.invalid || isSubmitting()">
          Enviar
        </button>
      </div>

      <p class="submit-error" *ngIf="submitError()">{{ submitError() }}</p>
    </form>
  </div>
</section>
